generator client {
    provider = "prisma-client-js"
}

datasource db {
    provider = "postgresql"
    url = env("DATABASE_URL")
}

model User {
    id         Int       @id @default(autoincrement())
    email      String    @unique
    password   String
    name       String?
    role       String    @default("buyer")
    createdAt  DateTime  @default(now())
    updatedAt  DateTime  @updatedAt
    tokens     RefreshToken[]
}

model RefreshToken {
    id                  Int         @id @default(autoincrement())
    tokenHash           String
    userId              Int
    user                User        @relation(fields: [userId], references: [id], onDelete: Cascade)
    userAgent           String?
    ip                  String?
    expiresAt           DateTime
    revokedAt           DateTime?
    createdAt           DateTime    @default(now())

    @@index([userId])
}



